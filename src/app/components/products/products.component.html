<!-- Card -->
<app-nav-bar></app-nav-bar>
<mat-card [ngClass]="{disabled: disabled}" class="center">

  <!-- Title -->
  <!-- <mat-card-title *ngIf="categoryName.length > 1">
    <h2 class="overflow-text">{{categoryName[1]}}</h2>
  </mat-card-title> -->

  <!-- Content -->
  <mat-card-content *ngIf="productsSub | async as products " class = "center">
    <!-- Virtual Scroll -->
    <cdk-virtual-scroll-viewport *ngIf="products.length > 0; else noProducts" itemSize="{{scroll.itemSize}}" [ngStyle]= "scroll.viewPortSize" > <!--(scrolledIndexChange)="checkLoad($event)"-->
      <!-- Products -->
      <a *cdkVirtualFor="let product of products;" class="line" (click)="openDetail(product)">
        <!-- Image -->
        <div class="img-container">
            <span aria-hidden="true" class="centerVertical"></span>
            <img src="{{product.images[0].imageUrl}}">
        </div>
        <!-- Text -->
        <div class="text-container product-description">
          <!-- First Line -->
            <div class="product-name">{{product.description}}</div>
            <div class="product-price">{{product.prices[0].value | currency}}</div>
        </div>
      </a>
      <!-- Spinner -->
      <mat-spinner *ngIf="loading" class="center"></mat-spinner> <!-- [diameter]="this.scroll.itemSize" -->
    </cdk-virtual-scroll-viewport>
  </mat-card-content>

  <!-- No Products -->
  <ng-template #noProducts>
    <mat-card-content>
      <p class="no-product overflow-text">Nessun prodotto da mostrare</p>
    </mat-card-content>
  </ng-template>
</mat-card>
